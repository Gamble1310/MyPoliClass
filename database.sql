-- Creazione del database
CREATE DATABASE MyPoliClassDB;
USE MyPoliClassDB;

-- Creazione della tabella Aule
CREATE TABLE Aule (
    Codice_Aula INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    Nome_Aula VARCHAR(10) NOT NULL,
    Immagine VARCHAR(250) NOT NULL,
    Numero_Posti INT NOT NULL,
    Tipologia VARCHAR(10) NOT NULL,
    Descrizione VARCHAR(100) NOT NULL,
    Disponibilita TEXT,
    Piano INT NOT NULL,
    Lim TINYINT(1) NOT NULL,
    Prese TINYINT(1) NOT NULL,
    Aria TINYINT(1) NOT NULL,
    Connessione TINYINT(1) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Creazione della tabella Utenti
CREATE TABLE Utenti (
    Nome VARCHAR(25) NOT NULL,
    Cognome VARCHAR(25) NOT NULL,
    Email VARCHAR(50) PRIMARY KEY NOT NULL,
    Psw VARCHAR(35) NOT NULL,
    Img_Profilo BLOB NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Creazione della tabella Prenotazioni
CREATE TABLE Prenotazioni (
    Email VARCHAR(50) NOT NULL,
    Data_Prenotazione DATE NOT NULL,
    Ora_Inizio TIME NOT NULL,
    Codice_aula INT NOT NULL,
    Ora_Fine TIME NOT NULL,
    PRIMARY KEY (Email, Codice_aula),
    FOREIGN KEY (Email) REFERENCES Utenti(Email) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (Codice_aula) REFERENCES Aule(Codice_Aula) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Inserimento di dati di esempio nella tabella Aule
INSERT INTO Aule (Nome_Aula, Immagine, Numero_Posti, Tipologia, Descrizione, Disponibilita, Piano, Lim, Prese, Aria, Connessione)
VALUES 
('A', '../immagini_aule/magna.jpeg', 252, 'Grande', 'Aula A del politecnico di Bari, aula Grande', 'Lunedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Martedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Mercoledì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Giovedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Venerdì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00' 2, 0, 0, 1, 1),
('N', '../immagini_aule/magna.jpeg', 266, 'Grande', 'Aula N, aula GRANDE, ristrutturata recentemente', 'Lunedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Martedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Mercoledì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Giovedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Venerdì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00' 2, 1, 1, 1, 1),
('10', '../immagini_aule/magna.jpeg', 85, 'Piccola', 'Aula numero 10, aula Piccola', 'Lunedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Martedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Mercoledì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Giovedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Venerdì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00' 1, 1, 1, 0, 1),
('C', '../immagini_aule/magna.jpeg', 266, 'Grande', 'Aula C, aula grande, nuova', 'Lunedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Martedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Mercoledì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Giovedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Venerdì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00', 2, 0, 1, 1, 1),
('D', '../immagini_aule/magna.jpeg', 266, 'Grande', 'Aula D, aula grande, aula nuova', 'Lunedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Martedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Mercoledì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Giovedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Venerdì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00', 2, 1, 1, 1, 1),
('G', '../immagini_aule/magna.jpeg', 266, 'Grande', 'Aula G, aula grande', 'Lunedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Martedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Mercoledì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Giovedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Venerdì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00', 2, 1, 1, 1, 1),
('I', '../immagini_aule/magna.jpeg', 266, 'Grande', 'Aula I, aula grande', 'Lunedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Martedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Mercoledì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Giovedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Venerdì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00', 2, 1, 1, 1, 1),
('L', '../immagini_aule/magna.jpeg', 266, 'Grande', 'Aula L, aula grande', 'Lunedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Martedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Mercoledì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Giovedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Venerdì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00', 2, 1, 1, 1, 1),
('9', '../immagini_aule/magna.jpeg', 50, 'Piccola', 'Aula 9, aula piccola', 'Lunedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Martedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Mercoledì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Giovedì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00/Venerdì/8:00-9:00/9:00-10:00/10:00-11:00/11:00-12:00/12:00-13:00/13:00-14:00/14:00-15:00/15:00-16:00/16:00-17:00/17:00-18:00/18:00-19:00/19:00-20:00/20:00-21:00/21:00-22:00', 2, 1, 1, 0, 0);

-- Inserimento di dati di esempio nella tabella Utenti
INSERT INTO Utenti (Nome, Cognome, Email, Psw, Img_Profilo)
VALUES 
('Vincenzo', 'Volpe', 'v.volpe@studenti.poliba.it', '12345', 0x3c3f786d6c2076657273696f6e3d22312e302220656e636f64696e673d225554462d38223f3e);

-- Inserimento di dati di esempio nella tabella Prenotazioni
INSERT INTO Prenotazioni (Email, Data_Prenotazione, Ora_Inizio, Codice_aula, Ora_Fine)
VALUES 
('v.volpe@studenti.poliba.it', '2024-11-20', '10:00:00', 1, '12:00:00'),
('v.volpe@studenti.poliba.it', '2024-11-21', '14:00:00', 2, '16:00:00');
